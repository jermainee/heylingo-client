(()=>{let n="heylingo.io";function o(){return localStorage.getItem("selectedLanguage")}function r(e){localStorage.setItem("selectedLanguage",e)}function l(e){var t=e.tagName.toLowerCase(),a=!!e.closest("header")||!!e.closest("nav"),n=!!e.closest("footer");return"button"===t||"a"===t&&"button"===e.getAttribute("role")?"button":a?"nav":n?"footer":/^h[1-6]$/.test(t)?"heading":"body"}function i(e,t){var t=t.replace(/\s+/g," ").trim().toLowerCase(),n=l(e),e=(a=>{for(var n=[];a&&a.parentElement;){var o=a.tagName.toLowerCase();let e=1,t=a;for(;null!=(t=t.previousElementSibling);)t.tagName.toLowerCase()===o&&e++;n.unshift(`${o}:nth-of-type(${e})`),a=a.parentElement}return n.join(">")})(e),n=[window.location.hostname,window.location.pathname,n,e,t].join("|");{var o=n;let e=0,t,a;if(0===o.length)return"0";for(t=0;t<o.length;t++)a=o.charCodeAt(t),e=(e<<5)-e+a,e|=0;return Math.abs(e).toString(16)}}function t(){var e,a=o();if(a&&a!==localStorage.getItem("originalLanguage")){let t=(()=>{var e=["p","li","button","a","span","h1","h2","h3","h4","h5","h6"].join(","),e=Array.from(document.querySelectorAll(e)).filter(e=>!e.closest("#languageSwitcher"));let o=new Map;return e.forEach(e=>{var t,a,n=e.innerText.trim();n&&(t=l(e),a=i(e,n),o.has(a)||o.set(a,{id:a,text:n,role:t,page_path:window.location.pathname,elements:[]}),o.get(a).elements.push(e))}),Array.from(o.values())})();t.length&&(e=t.map(e=>({id:e.id,text:e.text,role:e.role,page_path:e.page_path})),fetch(`https://${n}/api/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:window.location.hostname,target_lang:a,segments:e})}).then(e=>e.json()).then(e=>{var a;e.error?console.error("Translation API Error:",e.error):(a=e.translations,e=t,a&&"object"==typeof a&&e.forEach(e=>{let t=a[e.id];t&&t.translated_text&&e.elements.forEach(e=>{e.innerText=t.translated_text})}))}).catch(e=>console.error("Error fetching translations:",e)))}}function a(){fetch(`https://${n}/api/languages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:window.location.hostname})}).then(e=>e.json()).then(t=>{if(t.error)console.error("Language API Error:",t.error);else{t.original_language&&t.original_language.code&&(localStorage.getItem("selectedLanguage")||r(t.original_language.code),n=t.original_language.code,localStorage.setItem("originalLanguage",n));{var n=t.target_languages;let e=document.createElement("div"),a=(e.id="languageSwitcher",e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.background="white",e.style.border="1px solid #ddd",e.style.padding="10px",e.style.boxShadow="0px 2px 10px rgba(0,0,0,0.2)",e.style.zIndex="9999",e.style.borderRadius="5px",e.style.color="black",document.createElement("select"));a.style.padding="5px",a.style.fontSize="14px",a.style.border="none",a.style.outline="none",a.style.background="white",a.style.appearance="none",n.forEach(e=>{var t=document.createElement("option");t.value=e.code,t.textContent=e.name,a.appendChild(t)}),a.value=o(),a.addEventListener("change",()=>{r(a.value),location.reload()}),e.appendChild(a),document.body.appendChild(e)}}}).catch(e=>console.error("Error fetching languages:",e))}window.location.hostname?document.addEventListener("DOMContentLoaded",async()=>{var e;o()||r((e=navigator.language||"en-US").startsWith("de-")?"DE":e),await a(),await t(),document.documentElement.lang=o()}):console.error("Translation Script: Missing domain")})();