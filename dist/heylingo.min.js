(()=>{let n="heylingo.io";function a(){return localStorage.getItem("selectedLanguage")}function r(e){localStorage.setItem("selectedLanguage",e)}function t(){var e,t=a();t!==localStorage.getItem("originalLanguage")&&(e=(()=>{for(var e,t=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return!e.textContent.trim()||e.parentElement.closest("#languageSwitcher")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),n=new Set;e=t.nextNode();)n.add(e.textContent.trim());return Array.from(n)})(),fetch(`https://${n}/api/translate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:window.location.hostname,texts:e,target_lang:t})}).then(e=>e.json()).then(e=>{if(e.error)console.error("Translation API Error:",e.error);else for(var t,n=e.translations,o=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return!e.textContent.trim()||e.parentElement.closest("#languageSwitcher")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}});t=o.nextNode();){var a=t.textContent.trim();n[a]&&(t.textContent=n[a].translated_text)}}).catch(e=>console.error("Error fetching translations:",e)))}function o(){fetch(`https://${n}/api/languages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:window.location.hostname})}).then(e=>e.json()).then(t=>{if(t.error)console.error("Language API Error:",t.error);else{t.original_language&&t.original_language.code&&(localStorage.getItem("selectedLanguage")||r(t.original_language.code),o=t.original_language.code,localStorage.setItem("originalLanguage",o));{var o=t.target_languages;let e=document.createElement("div"),n=(e.id="languageSwitcher",e.style.position="fixed",e.style.bottom="20px",e.style.right="20px",e.style.background="white",e.style.border="1px solid #ddd",e.style.padding="10px",e.style.boxShadow="0px 2px 10px rgba(0,0,0,0.2)",e.style.zIndex="9999",e.style.borderRadius="5px",e.style.color="black",document.createElement("select"));n.style.padding="5px",n.style.fontSize="14px",n.style.border="none",n.style.outline="none",n.style.background="white",n.style.appearance="none",o.forEach(e=>{var t=document.createElement("option");t.value=e.code,t.textContent=e.name,n.appendChild(t)}),n.value=a(),n.addEventListener("change",()=>{r(n.value),location.reload()}),e.appendChild(n),document.body.appendChild(e)}}}).catch(e=>console.error("Error fetching languages:",e))}window.location.hostname?document.addEventListener("DOMContentLoaded",async()=>{var e;a()||r((e=navigator.language).startsWith("de-")?"DE":e),await o(),await t(),document.documentElement.lang=a()}):console.error("Translation Script: Missing domain")})();